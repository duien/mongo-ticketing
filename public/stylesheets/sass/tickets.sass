@import shared

$tab_color: $green
$new: $green
$open: $blue

body.tickets
  #nav ul.navigation li#tickets a
    border-color: $tab_color
  #subnav
    background: $tab_color

#main
  .tickets
    +column
    +grid_9
    padding-top: 10px
    padding-bottom: 20px
    .ticket
      +row_row
      border-bottom: 1px solid $background * 0.9
      .num, .status,.subject, .age
        margin: 10px 0
        font-size: 90%
      .num
        margin-left: 5px
      .status
        text-align: center
      &.header
        font-weight: bold
        font-size: 110%
        background: $background * 0.9
        border-color: $background * 0.8
        text-shadow: 0 1px 2px $background * 1.2
        .num, .status,.subject, .age
          margin: 5px 0
        .num
          margin-left: 5px
        .status
          text-align: left
      &.new, &.open, &.resolved
        .status
          margin: 8px 0
          padding: 2px 0
          +round(5px)
      &.new
        .status
          background: mix(mix($new, $background), $new)
      &.open
        .status
          background: mix(mix($open, $background), $open)
      &.resolved
        color: $gray * 1.7
        font-style: italic
      .narrow
        +column
        +grid_1
      .med
        +column
        +grid_2
      .wide
        +column
        +grid_5
  .filters
    overflow: visible
    // +column
    // +grid_3
    padding-top: 5px
    padding-bottom: 5px
    margin-top: 10px
    margin-bottom: 10px
    background: $tab_color
    color: $background
    +round(10px)
    .save_search a, .saved
      font-size: 120%
      margin: 10px
      padding: 5px
      text-align: center
      +round(5px)
    .save_search
      a
        text-decoration: none
        background: $tab_color * 0.8
        color: $background
        display: block
        &:hover
          background: $background
          color: $tab_color * 0.8
    .saved
      background: $yellow * 1.3
      color: $gray
      display: none
    .filter
      //:padding 10px
      h2
        font-size: 100%
        font-weight: normal
        background: $tab_color * 1.2
        color: $gray
        margin: 10px 0 0
        padding: 5px 10px
      ul.options
        margin: 10px
        list-style-type: none
        li
          margin: 3px 0
          font-size: 90%
          //:height= 1.2em
          .text
            border: 1px solid $tab_color
            padding-right: 6px
            +round(5px)
            overflow: hidden
            display: inline-block
            .check
              color: $tab_color
              width: 1em
              padding: 1px 3px
        li.selected
          .text
            border-color: $tab_color * 1.4
            .check
              background: $tab_color * 1.4
  & > .ticket
    +column
    +grid_9
    padding-top: 10px
    padding-bottom: 20px
    .status_bar
      +row_row
      padding-top: 10px
      padding-bottom: 10px
      text-align: center
      background: $background * 0.95
      .header
        text-transform: uppercase
        font-size: 70%
        color: $gray
        .short_id, .status, .dates, .people
          border-bottom: 1px solid
          padding-bottom: 5px
      .info
        font-size: 80%
        .short_id, .status, .dates, .people
          padding-top: 5px
      .short_id, .status
        +column
        +grid_1
      .dates
        +column
        +grid_3
      .people
        +column
        +grid_4
      .label
        text-transform: uppercase
        font-size: 80%
        color: $gray
    h2
      padding: 5px
      background: $background * 0.9
      border-bottom: 1px solid $background * 0.8
      text-shadow: 0 1px 2px $background * 1.2
      &.update
        margin-top: 20px
    .description
      padding-top: 10px
      padding-bottom: 10px
      font-size: 120%
      p
        padding: 5px 0
      pre
        padding: 5px 5px
        border-left: 5px solid $background * 0.9
        background: $background * 0.95
    .history
      .change_set
        border-top: 1px solid $background * 0.9
        .metadata
          +row_row
          padding-top: 5px
          padding-bottom: 5px
          .name
            +column
            +grid_2
            font-weight: bold
          .timestamp
            +column
            +grid_7
            text-align: right
            color: $gray
            font-size: 80%
        .main
          +row_row
          padding-top: 5px
          padding-bottom: 5px
          .avatar
            +column
            +grid_1
            .image
              border: 1px solid $background * 0.9
              height: 58px
          .content
            +column
            +grid_8
            padding-top: 0
            padding-bottom: 0
            .comment
              padding-bottom: 10px
            .changes
              .key
                font-weight: bold
              code
                background: $background * 0.9
    form.edit_ticket, form.new_ticket
      padding: 10px 0
      .field
        +row_row
        padding-top: 5px
        padding-bottom: 5px
        .label
          +column
          +grid_2
        .input
          +column
          +grid_7
          input, textarea
            width: 99%
            &#ticket_subject
              font-size: 100%
        .cancel
          +column
          +grid_2
          +clear_5(left)
        .submit
          +column
          +grid_2
  .sidebar
    +column
    +grid_3
    padding-top: 10px
    padding-bottom: 20px
.button
  display: block
  text-decoration: none
  font-size: 120%
  +round(10px)
  padding: 5px
  text-align: center
  background: $background * 0.8
  -webkit-box-shadow: $background * 0.6 0px 0px 3px inset
  color: $gray
  &:hover
    background: $tab_color * 1.2
    color: $gray
    -webkit-box-shadow: $tab_color 0px 0px 3px inset
  &:visited
    color: $gray


/* STATUS COLORING */
#main
  & > .ticket
    &.new
      h2.subject
        //background: mix($red, $background)
        //border-bottom: 5px solid mix(mix($red, $background), $red)
        background: mix(mix($new, $background), $new)
        text-shadow: 0 1px 2px mix($new, $background)
        border-bottom: 1px solid $new
      .status_bar
        background: mix($new, $background)
        .header
          .short_id, .status, .dates, .people
            border-color: $new
    &.open
      h2.subject
        //background: mix($yellow, $background)
        //border-bottom: 5px solid mix(mix($yellow, $background), $yellow)
        background: mix(mix($open, $background), $open)
        text-shadow: 0 1px 2px mix($open, $background)
        border-bottom: 1px solid $open
      .status_bar
        background: mix($open, $background)
        .header
          .short_id, .status, .dates, .people
            border-color: $open
      
